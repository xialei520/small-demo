<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no,viewport-fit=cover" name="viewport">

	<style>
		#container{
			width: 100%;
			height: 500px;
		}
		html, body{
			height: 100%;
			width: 100%;
		}
	</style>
</head>
<body>
	<div id='container'></div>
	<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
	<script>
		(function waterMark(){
			function textBecomeImg(text,fontsize,fontcolor, img){
				var canvas = document.createElement('canvas');
				$buHeight = 0;
				if(fontsize <= 32){ $buHeight = 99; }
				else if(fontsize > 32 && fontsize <= 60 ){ $buHeight = 2;}
				else if(fontsize > 60 && fontsize <= 80 ){ $buHeight = 4;}
				else if(fontsize > 80 && fontsize <= 100 ){ $buHeight = 6;}
				else if(fontsize > 100 ){ $buHeight = 10;}
				canvas.height=fontsize + $buHeight ;
				canvas.padding=30;
				var context = canvas.getContext('2d');
				context.clearRect(0, 0, canvas.width*2, canvas.height);
				// context.fillStyle = fontcolor;
				// context.font=fontsize+"px Arial";
				// context.textAlign = "center";
				// context.textBaseline = 'middle'; 
				// context.fillText(text,0,fontsize/2);
				var canvasWidth = canvas.width/99;
				canvasWidth = context.measureText(text).width;
				var clientWith = document.documentElement.clientWith;
				console.log(clientWith)
				console.log(document.documentElement.clientWidth)
				canvas.width = document.documentElement.clientWidth / 2;
				canvas.height = 200;
				context.fillStyle = fontcolor;
				context.font=fontsize+"px Arial";
				context.textBaseline = 'middle'; 
				console.log(img)
				context.drawImage(img, 10, 	0, 150, canvas.height);    
				context.fillText(text,150,80);
				// document.body.appendChild(canvas)
				var dataUrl = canvas.toDataURL('image/png');
				return dataUrl;
			}
			// var text = DateUtil.getDate(new Date())+currentUserName;
			var shuiyinDiv = document.createElement('div');
			var style = shuiyinDiv.style;
			style.position = 'absolute';
			style.left = 0;
			style.top = '-60%';
			style.width = '100%';
			style.height = '100%';
			style.opacity = '1';
			 //创建新的图片对象
		    var img = new Image();
		     //指定图片的URL
		    img.src = "./logo.png"+ "?v=" + new Date().getTime();
		    img.setAttribute('crossOrigin', 'anonymous');
		     //浏览器加载图片完毕后再绘制图片
		    img.onload = function(){
		    	
		         //以Canvas画布上的坐标(10,10)为起始点，绘制图像
		         //图像的宽度和高度分别缩放到350px和100px
		          
		          
		        style.background = "url("+textBecomeImg('青岛银行',50,"red", img)+")";
				style.zIndex = 9999999991;
				style.transform = "rotate(-30deg)";
				style.pointerEvents = "none";
				document.body.appendChild(shuiyinDiv);    
		    };
		    
						
		})();
 		
 		// function watermarkWord(id, watermarkImg , watermarkText) {

   //          var screenHeight = window.screen.height
   //          var watermarkImg = watermarkImg ;
   //          var watermarkText =  watermarkText;
            
   //          if (navigator.appName == "Microsoft Internet Explorer" && navigator.appVersion.match(/9./i) == "9.") {
   //              var step = 180 / 480 * screenHeight;
   //              for (var i = 0; i <= parseInt($("body").height() / step); i++) {
   //                  $('body').append('<div style="z-index:-999;width:100%;text-align:center;opacity:0.2;color:#000;position:absolute;top:' + step * (i) + 'px;font-size:2em;transform:rotate(-30deg); -ms-transform:rotate(-30deg); -o-tranform:rotate(-30deg); -webkit-transform:rotate(-30deg); -moz-transform:rotate(-30deg);filter:progid:DXImageTransform.Microsoft.Alpha(opacity=10));">' + watermarkText + '<br /><img style="width:8em;" src="' + watermarkImg + '" /></div>');
   //              }
   //          } else {
   //              var step = 180 / 480 * screenHeight;
   //              for (var i = 0; i <= parseInt($("body").height() / step); i++) {
   //                  $('body').append('<div style="z-index:-999;width:100%;text-align:center;opacity:0.5;color:#000;position:absolute;top:' + step * (i) + 'px;font-size:2em;transform:rotate(-30deg); -ms-transform:rotate(-30deg); -o-tranform:rotate(-30deg); -webkit-transform:rotate(-30deg); -moz-transform:rotate(-30deg);filter:progid:DXImageTransform.Microsoft.Alpha(opacity=10) progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\', M11=0.866025404, M12=0.5, M21=-0.5, M22=0.866025404);">' + watermarkText + '<br /><img  style="width:8em;" src="' + watermarkImg + '" /></div>');
   //              }
   //          }
   //      }
   //      var contain = document.getElementById('container');
   //      watermarkWord(contain, './logo.png', '青岛银行')
	</script>
</body>
</html>